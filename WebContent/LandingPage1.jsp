<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ALL-IN-ONE</title>
<!-- jQuery -->
<script src="${pageContext.request.contextPath}/resources/css/jQuery.min.js"></script>
<!--  ${pageContext.request.contextPath} - gives you path of the project -->
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/resources/css/LandingPage1.css" media="screen" />
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/materialize.min.css"  media="screen,projection"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/materialize.min.css"  media="screen,projection"/>
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
<style type="text/css">
<!--
body { 
 padding:0;
 margin:0;
}
-->
</style>
</head>
<body background="${pageContext.request.contextPath}/resources/UIAssets/asset6xe.svg"> 
	<div class="duomodal" id="duoPlacementDiv">
			<iframe id="duo_iframe" width="100%" height="800"></iframe>
	</div>
	<div class="panel1">
		<div id="bImage4" class="bimage4">
			<object type="image/svg+xml" data="${pageContext.request.contextPath}/resources/UIAssets/asset13.svg" height="500px;"></object>
			<%-- <img  src="${pageContext.request.contextPath}/resources/UIAssets/asset13.svg" height="500px;"/> --%>
		</div>
		<div id="bImage5" class="bimage5">
			<object type="image/svg+xml" data="${pageContext.request.contextPath}/resources/UIAssets/asset14.svg" height="500px;"></object>
			<%-- <img  src="${pageContext.request.contextPath}/resources/UIAssets/asset14.svg" height="500px;"/> --%>
		</div>
		<div id="bImage6" class="bimage6">
			<object type="image/svg+xml" data="${pageContext.request.contextPath}/resources/UIAssets/asset15.svg" height="500px;"></object>
			<%-- <img  src="${pageContext.request.contextPath}/resources/UIAssets/asset15.svg" height="500px;"/> --%>
		</div>
		<div id="bImage1" class="bimage1">
			<object type="image/svg+xml" data="${pageContext.request.contextPath}/resources/UIAssets/asset11.svg" height="500px;"></object>
			<%-- <img  src="${pageContext.request.contextPath}/resources/UIAssets/asset11.svg" height="500px;"/> --%>
		</div>
		<div id="bImage2" class="bimage2">
			<%-- <img  src="${pageContext.request.contextPath}/resources/UIAssets/asset11.svg" height="500px;"/> --%>
		</div>
		<div id="bFeature1" class="bfeature1">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/feature1_4.svg"/ height= "60px;">
		</div>
		<div id="bFeature2" class="bfeature2">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/feature2.svg"/ height= "60px;">
		</div>
		<div id="bFeature3" class="bfeature3">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/feature3.svg"/ height= "60px;">
		</div>
		<div id="bImage3" class="bimage3">
			<object type="image/svg+xml" data="${pageContext.request.contextPath}/resources/UIAssets/asset12.svg" height="500px;"></object>
			<%-- <img  src="${pageContext.request.contextPath}/resources/UIAssets/asset12.svg" height="500px;"/> --%>
		</div>
		<div id="bFeature4" class="bfeature4">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/feature4.svg"/ height= "60px;">
		</div>
		<div id="bFeature5" class="bfeature5">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/feature5.svg"/ height= "60px;">
		</div>
		<div id="bFeature6" class="bfeature6">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/feature6.svg"/ height= "60px;">
		</div>
		<div id="bFeature7" class="bfeature7">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/feature7.svg"/ height= "60px;">
		</div>
		<div id="bFeature8" class="bfeature8">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/feature8.svg"/ height= "60px;">
		</div>
		<div id="aboutUs" class="aboutus">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/aboutus.svg"/ height= "60px;">
		</div>
		<div id="bFeature9" class="bfeature9">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/dev1.svg"/ height= "100px;">
		</div>
		<div id="bFeature10" class="bfeature10">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/dev2.svg"/ height= "100px;">
		</div>
		<div id="bFeature11" class="bfeature11">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/dev3.svg"/ height= "100px;">
		</div>
		<div id="bFeature12" class="bfeature12">
			<object type="image/svg+xml" data="${pageContext.request.contextPath}/resources/UIAssets/dev21.svg" height="150px;"></object>
			<%-- <img  src="${pageContext.request.contextPath}/resources/UIAssets/dev21.svg"/ height= "150px;"> --%>
		</div>
		<div id="bFeature13" class="bfeature13">
			<object type="image/svg+xml" data="${pageContext.request.contextPath}/resources/UIAssets/dev11.svg" height="150px;"></object>
			<%-- <img  src="${pageContext.request.contextPath}/resources/UIAssets/dev11.svg"/ height= "150px;"> --%>
		</div>
		<div id="bFeature14" class="bfeature14">
			<object type="image/svg+xml" data="${pageContext.request.contextPath}/resources/UIAssets/dev31.svg" height="150px;"></object>
			<%-- <img  src="${pageContext.request.contextPath}/resources/UIAssets/dev31.svg"/ height= "150px;"> --%>
		</div>
	</div> 
	<div class="panel2">
		<img  id="imageArrow" src="${pageContext.request.contextPath}/resources/UIAssets/asset7.svg" height="10px;" width="500px;"/>
	</div>
	<div id="mainDiv" class="maindiv">
	<!-- <div class="colorstrip1"></div> -->
		<div class="signupbuttondiv">
					 <button id="signupButton" class="waves-effect waves-light btn" style="background-color:#ffbf03;max-height:60px;height:60px;width:100%;font-size:2em">Sign Up</button>
		</div>
		<div class="loginbuttondiv">
			<button id="loginButton" class="waves-effect waves-light btn" style="background-color:#ffbf03;max-height:60px;height:60px;width:100%;font-size:2em">Log In</button>
		</div>
		<div style="position:fixed;left:0%;height:100%">
			<img  src="${pageContext.request.contextPath}/resources/UIAssets/asset4.png" height="100%"/>
		</div>
		<div class="colorstrip2">
			<%-- <div class="bgimage" style="height:100%;">
				<div class="signupbuttondiv">
					 <button id="signupButton" class="waves-effect waves-light btn" style="background-color:#ffbf03;height:60px;width:100%;font-size:2em">Sign Up</button>
				</div>
				<div class="loginbuttondiv">
					<button id="loginButton" class="waves-effect waves-light btn" style="background-color:#ffbf03;height:60px;width:100%;font-size:2em">Log In</button>
				</div>
				<div style="position:absolute;top:0px;height:100%">
					<img  src="${pageContext.request.contextPath}/resources/UIAssets/asset4.png" height="100%"/>
				</div>
			</div> --%>
			<b class="allinonebanner">all-in-one</b>
			
			<b class="multisportfantasyleague">multi-sport fantasy league</b>
			
			<!-- <div class="signupbuttondiv">
				 <button id="signupButton" class="waves-effect waves-light btn" style="background-color:#ffbf03;height:60px;width:100%;font-size:2em">Sign Up</button>
			</div>
			<div class="loginbuttondiv">
				<button id="loginButton" class="waves-effect waves-light btn" style="background-color:#ffbf03;height:60px;width:100%;font-size:2em">Log In</button>
			</div> -->
			<!-- <div style="position:fixed; color:#ffffff; font-size:1.75em; bottom: 200px; left: 25px;">
				a group 4 project
			</div> -->
		</div>
	</div> 
<div id="loginModal" class="loginmodalcss">
		 	<!-- Modal content -->
		  	<div id="loginModalContent" class="modal-content">
			  	<form name="loginForm"  >
			  		<p class="logincred">login details</p>
				    <input type="text" class="username" id="username" name="username" placeholder="User Name..."><br>
				    <input type="password" class="password" id="password" name="password" placeholder="Password..."><br>
				    <input class="waves-effect waves-light btn" style="background-color:#ffbf03;height:40px;width:100%;font-size:2em;text-transform: lowercase;" type="button" value="submit" onclick="javascript:validateLoginForm()"/>
				    <div class="forgotuorpdiv">
					    <p class="forgotuorp">forgot username or password?</p>
					    <button id="reset" class="reset">click here</button>
				    </div>
				    <input class="waves-effect waves-light btn" style="background-color:#ffbf03;height:20px;width:50%;font-size:1em;text-transform: lowercase;" type="button" id="close2" value="close"/>
				</form>
		  	</div>
</div>
<div id="signupModal" class="signupmodalcss">
		 	<!-- Modal content -->
		  	<div id="signupModalContent" class="signup-modal-content">
			  	<form name="signupForm" >
			  		<p class="signupcred">signup details</p>
			  		<input type="text" class="semail" id="email" name="email" placeholder="Email ID"..."><br>
				    <input type="text" class="susername" id="username" name="username" placeholder="User Name..."><br>
				    <input type="password" class="spassword" id="password" name="password" placeholder="Password..."><br>
				    <input type="password" class="srepassword" id="repassword" name="repassword" placeholder="Reconfirm password..."><br>
				    <input class="waves-effect waves-light btn" style="background-color:#ffbf03;height:40px;width:100%;font-size:2em;text-transform: lowercase;" type="button" value="Submit" onclick="javascript:validateSignUpForm()" />
					<input class="waves-effect waves-light btn" style="background-color:#ffbf03;height:20px;width:50%;font-size:1em;text-transform: lowercase;margin-top:10px;" type="button" id="close1" value="close"/>
				</form>
		  	</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="${pageContext.request.contextPath}/resources/js/Duo-Web-v2.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="${pageContext.request.contextPath}/resources/js/materialize.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
var flag=1
setInterval(function() {
	var obj = document.getElementById("imageArrow");
    var val = parseFloat(window.getComputedStyle(obj).getPropertyValue("opacity"));
    if(val == 0) {
    	flag=0;
    	obj.style.opacity = (val + 0.1);
    } else if (val == 1) {
    	flag=1;
    	obj.style.opacity = (val - 0.1);
    } else {
	    if(flag==1){
	    	obj.style.opacity = (val - 0.1);
	    } else {
	    	obj.style.opacity = (val + 0.1);
	    }
    }
}, 125);

var bImage1 = document.getElementById("bImage1");
var bFeature1 = document.getElementById("bFeature1");
$(window).scroll(function(){
	if ($(this).scrollTop() >= 2500) {
    	imageArrow.style.display = "none";
    }
    if ($(this).scrollTop() >= 370) {
    	bImage1.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 280) {
    	bFeature1.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 350) {
    	bFeature2.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 420) {
    	bFeature3.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 450) {
    	bImage2.style.opacity = 0;
    }
    if ($(this).scrollTop() >= 750) {
    	bImage3.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 880) {
    	bFeature4.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 910) {
    	bFeature5.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 950) {
    	bFeature6.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 1410) {
    	bFeature7.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 1450) {
    	bFeature8.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 2250) {
    	aboutUs.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 2350) {
    	bFeature9.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 2400) {
    	bFeature10.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 2450) {
    	bFeature11.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 2350) {
    	bFeature12.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 2400) {
    	bFeature13.style.opacity = 1;
    }
    if ($(this).scrollTop() >= 2450) {
    	bFeature14.style.opacity = 1;
    }
});
window.onload=function()  //executes when the page finishes loading
{
	setTimeout(func1, 500);
	setTimeout(func2, 1000);
	setTimeout(func3, 1500);
	//sets a timer which calls function func1 after 2,000 milliseconds = 2 secs.
	
};
function func1()
{
	document.getElementById("bImage6").style.opacity = 1;
}
function func2()
{
	document.getElementById("bImage4").style.opacity = 1;
}
function func3()
{
	document.getElementById("bImage5").style.opacity = 1;
}

</script>
<script type="text/javascript">
$.noConflict();
jQuery(document).ready( function() {
  console.log("i am ready");
  document.getElementById('duo_iframe').hide(); 
});

var mainDiv = document.getElementById("mainDiv");
var loginButton = document.getElementById("loginButton");
var loginModal = document.getElementById("loginModal");
var loginModalContent = document.getElementById("loginModalContent");
var signupButton = document.getElementById("signupButton");
var signupModal = document.getElementById("signupModal");

close1.onlick = function(){
	signupModal.style.display = "none";
}
close2.onlick = function(){
	loginModal.style.display = "none";
}
window.onclick = function(event) {
	if(event.target.parentNode.className != "" && event.target.parentNode.className != "signup-modal-content" && event.target.parentNode.className != "signupmodalcss" && event.target.parentNode.className != "modal-content" && event.target.parentNode.className != "loginmodalcss" && event.target.parentNode.className != "forgotuorpdiv"){
		if(event.target.parentNode.className !="loginbuttondiv"){
			if(event.target.parentNode.className != "signupbuttondiv"){
			    if (event.target.parentNode.className != loginModal) {
			        loginModal.style.display = "none";
			        mainDiv.classList.remove("blur");
			    }
			    if (event.target.parentNode.className != signupModal){
			    	signupModal.style.display = "none";
			        mainDiv.classList.remove("blur");
			    }
			}
		}
	}		
}

loginButton.onclick = function() {
    loginModal.style.display = "block";
    mainDiv.classList.add("blur");
}

signupButton.onclick = function() {
    signupModal.style.display = "block";
    mainDiv.classList.add("blur");
}

function validateSignUpForm(){
	
	var email = document.forms["signupForm"]["email"].value;
	var username = document.forms["signupForm"]["username"].value;
	var password = document.forms["signupForm"]["password"].value;
	var repassword = document.forms["signupForm"]["repassword"].value;
	var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
	var pfilter1 = /^(?=.*[a-z])/;
	var pfilter2 = /^(?=.*[A-Z])/;
	var pfilter3 = /^(?=.*\d)/;
	
	if (!filter.test(email)) {
	    alert("Please provide a valid email address");
	    return false;
 	}else if(email == "" || username == "" || password == "" || repassword == ""){
		alert("Enter all fields");
		return false;
	}else if(password.length < 8){
		alert("Password must be at least 8 characters long");
		return false;
	}else if(!pfilter1.test(password)){
		alert("Password must containt at least 1 lowercase letter");
		return false;
	}else if(!pfilter2.test(password)){
		alert("Password must containt at least 1 uppercase letter");
		return false;
	}else if(!pfilter3.test(password)){
		alert("Password must containt at least 1 number");
		return false;
	}else if(password != repassword){
		alert("Passwords do not match, reconfirm password");
		return false;
	}
	jQuery.ajax({
	    url : '/All-In-One-FantasyGame/register',
	    type: 'post',
	    data : {userName:username,passWord:password,emailId:email},
	    success: function(data)
	    {	
	    	signupModal.style.display = "none";
	    	console.log("Came from backend");
		if(data=="Success"){
			alert("Congratulations..! Please Login to fantastic world of sports")
		}
	    },
	    error: function (jqXHR, textStatus, errorThrown)
	    {	
		alert("Username already in use. Please try a different username")
	    }
	});
}

function validateLoginForm(){
	var userName = document.forms["loginForm"]["username"].value;
	var passWord = document.forms["loginForm"]["password"].value;
	console.log("Came here 1");
	console.log(userName);
	console.log(passWord);
	if(userName == "" || passWord == ""){
		alert("Enter all fields");
		return false;
	}
	jQuery.ajax({
	    url : '/All-In-One-FantasyGame/loginCheck',
	    type: 'post',
	    data : {username:userName,password:passWord},
	    success: function(data)
	    {	
		if(data=="true")
			{
			
			duo(userName);
			
			}
		else{alert("Username/Password doesn't match")}
	    },
	    error: function (jqXHR, textStatus, errorThrown)
	    {	
		alert("please try again.Contact administrator")
	    }
	});
    return true;
 }

 function duo(userName){
	 console.log("Ready for dual auth");
	 console.log(userName);
	 jQuery.ajax({
		    url : '/All-In-One-FantasyGame/duoSignRequest',
		    type: 'post',
		    data : {username:userName},
		    success: function(data)
		    {	 
				 			 
				 alpha = Duo.init({
					 'host':'api-35d604b9.duosecurity.com',
					 'post_action':'/All-In-One-FantasyGame/duoSignResponse',
					 'sig_request':data
					 
				 });
				 
				 loginModal.style.display = none;
				 mainDiv.classList.remove("blur");
				 document.getElementById('duo_iframe').show();
				// var ifrm=document.createElement('iframe');
				// ifrm.setAttribute('id', 'duo_iframe');
				 //ifrm.setAttribute('width', '620');
				 //ifrm.setAttribute('height', '500');
				 //ifrm.setAttribute('frameborder', '0');
				 //ifrm.setAttribute('allowtransparency', 'true');
				// document.getElementById('duoPlacementDiv').appendChild(ifrm);
				 
		    },
		    error: function (jqXHR, textStatus, errorThrown)
		    {	
			alert("please try again.Contact administrator")
		    }
		});
 }
 


</script>
</body>
</html>